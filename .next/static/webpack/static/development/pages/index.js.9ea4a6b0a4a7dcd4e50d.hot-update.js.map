{"version":3,"file":"static/webpack/static/development/pages/index.js.9ea4a6b0a4a7dcd4e50d.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from 'react';\nimport {\n  Flex, Box, Button,\n} from 'rebass';\nimport PropTypes from 'prop-types';\nimport { User, getConfig } from 'radiks';\n\nimport Text from '../styled/typography';\nimport Message from '../models/Message';\nimport Feed from '../components/feed';\n\nclass Home extends React.Component {\n  static propTypes = {\n    messages: PropTypes.array,\n  }\n\n  static defaultProps = {\n    messages: [],\n  }\n\n  state = {\n    currentUser: null,\n  }\n\n  static async getInitialProps() {\n    const messages = await Message.fetchList({\n        sort: '-createdAt',\n        limit: 10,\n    }, { decrypt: false });\n     return {\n        messages,\n    };\n    }\n\n  async componentDidMount() {\n  const { userSession } = getConfig();\n    if (userSession.isUserSignedIn()) {\n        const currentUser = userSession.loadUserData();\n        this.setState({ currentUser });\n    } else if (userSession.isSignInPending()) {\n        const currentUser = await userSession.handlePendingSignIn();\n        await User.createWithCurrentUser();\n        this.setState({ currentUser });\n    }\n  }\n\n  login = () => {\n    const { userSession } = getConfig();\n    userSession.redirectToSignIn();\n  }\n\n  logout = () => {\n  const { userSession } = getConfig();\n    userSession.signUserOut();\n        this.setState({\n    currentUser: null,\n    });\n  }\n\n  render() {\n    const { currentUser } = this.state;\n    return (\n      <>\n        <Flex>\n          <Box width={[1, 3 / 4]} mx=\"auto\">\n            <Text.h1 fontFamily=\"Montserrat\" textAlign=\"center\">\n              Sonder\n            </Text.h1>\n            {currentUser ? (\n              <>\n                <Text.small textAlign=\"center\" display=\"block\">\n                  Logged in as\n                  {' '}\n                  {currentUser.username}\n                  {'. '}\n                  <a href=\"javascript:void(0)\" onClick={this.logout}>Log Out</a>\n                </Text.small>\n                <Feed messages={this.props.messages} />\n              </>\n            ) : (\n              <>\n                <Text.p textAlign=\"center\">\n                  The realization that each random passerby is living a life as vivid and complex as your own\n                </Text.p>\n\n                <Button mt={3} onClick={this.login} mx=\"auto\" style={{ display: 'block' }}>\n                  Log In\n                </Button>\n              </>\n            )}\n          </Box>\n        </Flex>\n      </>\n    );\n  }\n}\n\nexport default Home;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AASA;AACA;AADA;AACA;AAyBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;;;;;;;;;;;;;;;;AAvBA;AACA;AAAA;;;;;AACA;AACA;AAAA;AAAA;;;;;AACA;;;;;;AACA;AACA;;AADA;;AACA;AACA;;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAgBA;AAAA;AAEA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAKA;AAAA;AAAA;AAKA;AAAA;AAAA;AAEA;AAAA;AAIA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;;;;;;;;;;;AArEA;AACA;AACA;AAFA;AAGA;AAAA;AACA;;AAJA;AAIA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;;AAnBA;AACA;AADA;AAEA;AADA;AACA;AAFA;AAMA;AADA;AACA;AAgFA;;;;A","sourceRoot":""}